<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" type="text/css" th:href="@{/static/mycss.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/static/topnavbar.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
<div th:replace="menu :: menuFragment"></div>

<main class="container">
  <header>
    <h1>Welcome to the Project Overview</h1>
  </header>

  <section th:each="project: ${projects}" class="project-card">
    <h2 th:text="${project.name}"></h2>
    <p>Start Date: <time th:text="${project.startDate}"></time></p>
    <p>End Date: <time th:text="${project.endDate}"></time></p>

    <div class="action-buttons">
      <a th:href="@{'/viewoneproject/'+${project.id}}"><button class="btn-viewOne">View project</button></a>
      <a th:href="@{'/deleteproject/'+${project.id}}"><button class="btn-deleteOne">Delete project</button></a>
      <a th:href="@{'/updateproject/'+${project.id}}"><button class="btn-updateOne">Update project</button></a>
    </div>

    <details>
      <summary>Subprojects</summary>
      <div th:each="subproject: ${project.subProjects}" class="subproject-card">
        <h3 th:text="${subproject.name}"></h3>

        <div class="action-buttons">
          <a th:href="@{'/viewonesubproject/'+${subproject.id}}"><button class="btn-viewOne">View subproject</button></a>
          <a th:href="@{'/deleteSubProject/'+${subproject.id}}"><button class="btn-deleteOne">Delete subproject</button></a>
          <a th:href="@{'/updateSubProject/'+${subproject.id}}"><button class="btn-updateOne">Update subproject</button></a>
        </div>

        <details>
          <summary>Tasks</summary>
          <div th:each="task: ${subproject.tasks}" class="task-card">
            <h4 th:text="${task.name}"></h4>

            <div class="action-buttons">
              <a th:href="@{'/viewonetask/'+${task.id}}"><button class="btn-viewOne">View task</button></a>
              <a th:href="@{'/deleteOne/'+${task.id}}"><button class="btn-deleteOne">Delete task</button></a>
              <a th:href="@{'/updatetask/'+${task.id}}"><button class="btn-updateOne">Update task</button></a>
            </div>

            <details>
              <summary>Resources</summary>
              <div th:each="resource: ${task.resources}" class="resource-card">
                <span th:text="${resource.name}"></span>

                <div class="action-buttons">
                  <a th:href="@{'/viewoneresource/'+${resource.id}}"><button class="btn-viewOne">View resource</button></a>
                  <a th:href="@{'/deleteresource/'+${resource.id}}"><button class="btn-deleteOne">Delete resource</button></a>
                  <a th:href="@{'/updateresource/'+${resource.id}}"><button class="btn-updateOne">Update resource</button></a>
                </div>

                <details>
                  <summary>Skills</summary>
                  <div th:each="skill: ${resource.skills}" class="skill-card">
                    <span th:text="${skill.name}"></span>

                    <div class="action-buttons">
                      <a th:href="@{'/viewoneskill/'+${skill.id}}"><button class="btn-viewOne">View skill</button></a>
                      <a th:href="@{'/deleteSkill/'+${skill.id}}"><button class="btn-deleteOne">Delete skill</button></a>
                      <a th:href="@{'/updateskill/'+${skill.id}}"><button class="btn-updateOne">Update skill</button></a>
                    </div>
                  </div>
                </details>
              </div>
            </details>
          </div>
        </details>
      </div>
    </details>
  </section>
</main>

</body>
</html>
